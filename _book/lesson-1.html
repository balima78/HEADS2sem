<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.1 Lesson 1 | HEADS 2nd semester</title>
  <meta name="description" content="HEADS’s homeworks compilation." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="2.1 Lesson 1 | HEADS 2nd semester" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="HEADS’s homeworks compilation." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.1 Lesson 1 | HEADS 2nd semester" />
  
  <meta name="twitter:description" content="HEADS’s homeworks compilation." />
  

<meta name="author" content="Bruno A Lima" />


<meta name="date" content="2020-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="compstat.html"/>
<link rel="next" href="lesson-2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HEADS 2nd semester 2019/2020</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="compstat.html"><a href="compstat.html"><i class="fa fa-check"></i><b>2</b> COMPSTAT</a><ul>
<li class="chapter" data-level="2.1" data-path="lesson-1.html"><a href="lesson-1.html"><i class="fa fa-check"></i><b>2.1</b> Lesson 1</a></li>
<li class="chapter" data-level="2.2" data-path="lesson-2.html"><a href="lesson-2.html"><i class="fa fa-check"></i><b>2.2</b> Lesson 2</a></li>
<li class="chapter" data-level="2.3" data-path="assignment-histogram.html"><a href="assignment-histogram.html"><i class="fa fa-check"></i><b>2.3</b> assignment Histogram</a></li>
<li class="chapter" data-level="2.4" data-path="assignment-matrix.html"><a href="assignment-matrix.html"><i class="fa fa-check"></i><b>2.4</b> assignment Matrix</a><ul>
<li class="chapter" data-level="2.4.1" data-path="assignment-matrix.html"><a href="assignment-matrix.html#keep-sample-matrix"><i class="fa fa-check"></i><b>2.4.1</b> keep sample matrix</a></li>
<li class="chapter" data-level="2.4.2" data-path="assignment-matrix.html"><a href="assignment-matrix.html#keep-sample-matrix-over-a-sliding-window"><i class="fa fa-check"></i><b>2.4.2</b> keep sample matrix over a sliding window</a></li>
<li class="chapter" data-level="2.4.3" data-path="assignment-matrix.html"><a href="assignment-matrix.html#keep-sample-matrix-over-a-alpha-weighted-sliding-window"><i class="fa fa-check"></i><b>2.4.3</b> keep sample matrix over a alpha weighted sliding window</a></li>
<li class="chapter" data-level="2.4.4" data-path="assignment-matrix.html"><a href="assignment-matrix.html#keep-sample-matrix-over-a-alpha-fading-window"><i class="fa fa-check"></i><b>2.4.4</b> keep sample matrix over a alpha fading window</a></li>
<li class="chapter" data-level="2.4.5" data-path="assignment-matrix.html"><a href="assignment-matrix.html#bonus"><i class="fa fa-check"></i><b>2.4.5</b> Bonus</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="lesson-3.html"><a href="lesson-3.html"><i class="fa fa-check"></i><b>2.5</b> Lesson 3</a><ul>
<li class="chapter" data-level="2.5.1" data-path="lesson-3.html"><a href="lesson-3.html#kernel-density-estimation"><i class="fa fa-check"></i><b>2.5.1</b> Kernel density estimation</a></li>
<li class="chapter" data-level="2.5.2" data-path="lesson-3.html"><a href="lesson-3.html#conditional-density"><i class="fa fa-check"></i><b>2.5.2</b> Conditional density</a></li>
<li class="chapter" data-level="2.5.3" data-path="lesson-3.html"><a href="lesson-3.html#expectation-maximization-for-the-two-latent-variables"><i class="fa fa-check"></i><b>2.5.3</b> Expectation Maximization for the two latent variables</a></li>
<li class="chapter" data-level="2.5.4" data-path="lesson-3.html"><a href="lesson-3.html#data-generation"><i class="fa fa-check"></i><b>2.5.4</b> Data Generation</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="assignment-glucose.html"><a href="assignment-glucose.html"><i class="fa fa-check"></i><b>2.6</b> assignment Glucose</a><ul>
<li class="chapter" data-level="2.6.1" data-path="assignment-glucose.html"><a href="assignment-glucose.html#defining-a-function-for-expectation-maximization-algorithm"><i class="fa fa-check"></i><b>2.6.1</b> Defining a function for Expectation-Maximization algorithm</a></li>
<li class="chapter" data-level="2.6.2" data-path="assignment-glucose.html"><a href="assignment-glucose.html#clusters-density-curves"><i class="fa fa-check"></i><b>2.6.2</b> 2 clusters density curves</a></li>
<li class="chapter" data-level="2.6.3" data-path="assignment-glucose.html"><a href="assignment-glucose.html#clusters-density-curves-1"><i class="fa fa-check"></i><b>2.6.3</b> 3 clusters density curves</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html"><i class="fa fa-check"></i><b>2.7</b> assignment Second Lead from ECG</a><ul>
<li class="chapter" data-level="2.7.1" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#defining-a-function-for-expectation-maximization-em-algorithm"><i class="fa fa-check"></i><b>2.7.1</b> Defining a function for expectation-maximization (EM) algorithm</a></li>
<li class="chapter" data-level="2.7.2" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#reading-the-data-and-ploting-the-leads-distribution"><i class="fa fa-check"></i><b>2.7.2</b> reading the data and ploting the leads distribution</a></li>
<li class="chapter" data-level="2.7.3" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#em-algorithm-for-2-latent-classes"><i class="fa fa-check"></i><b>2.7.3</b> EM algorithm for 2 latent classes</a></li>
<li class="chapter" data-level="2.7.4" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#em-algorithm-for-3-latent-classes"><i class="fa fa-check"></i><b>2.7.4</b> EM algorithm for 3 latent classes</a></li>
<li class="chapter" data-level="2.7.5" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#generating-1000-data-points-at-random-with-bootstrapped-with-guassian-distribution-and-em-with-3-clusters."><i class="fa fa-check"></i><b>2.7.5</b> Generating 1000 data points at random with bootstrapped, with guassian distribution and EM with 3 clusters.</a></li>
<li class="chapter" data-level="2.7.6" data-path="assignment-second-lead-from-ecg.html"><a href="assignment-second-lead-from-ecg.html#bonus-1"><i class="fa fa-check"></i><b>2.7.6</b> Bonus</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="lesson-4.html"><a href="lesson-4.html"><i class="fa fa-check"></i><b>2.8</b> Lesson 4</a><ul>
<li class="chapter" data-level="2.8.1" data-path="lesson-4.html"><a href="lesson-4.html#random-number-generation"><i class="fa fa-check"></i><b>2.8.1</b> Random Number Generation</a></li>
<li class="chapter" data-level="2.8.2" data-path="lesson-4.html"><a href="lesson-4.html#my-simple-solution-for-a-random-number-generator"><i class="fa fa-check"></i><b>2.8.2</b> My simple solution for a random number generator:</a></li>
<li class="chapter" data-level="2.8.3" data-path="lesson-4.html"><a href="lesson-4.html#transition-probabilities"><i class="fa fa-check"></i><b>2.8.3</b> Transition probabilities</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="stats.html"><a href="stats.html"><i class="fa fa-check"></i><b>3</b> STATS</a><ul>
<li class="chapter" data-level="3.1" data-path="lesson-1-1.html"><a href="lesson-1-1.html"><i class="fa fa-check"></i><b>3.1</b> Lesson 1</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-2-1.html"><a href="lesson-2-1.html"><i class="fa fa-check"></i><b>3.2</b> Lesson 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="learn.html"><a href="learn.html"><i class="fa fa-check"></i><b>4</b> LEARN</a><ul>
<li class="chapter" data-level="4.1" data-path="lesson-1-2.html"><a href="lesson-1-2.html"><i class="fa fa-check"></i><b>4.1</b> Lesson 1</a></li>
<li class="chapter" data-level="4.2" data-path="lesson-2-2.html"><a href="lesson-2-2.html"><i class="fa fa-check"></i><b>4.2</b> Lesson 2</a><ul>
<li class="chapter" data-level="4.2.1" data-path="lesson-2-2.html"><a href="lesson-2-2.html#test-harness"><i class="fa fa-check"></i><b>4.2.1</b> Test harness</a></li>
<li class="chapter" data-level="4.2.2" data-path="lesson-2-2.html"><a href="lesson-2-2.html#make-predictions"><i class="fa fa-check"></i><b>4.2.2</b> Make predictions</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="lesson-3-1.html"><a href="lesson-3-1.html"><i class="fa fa-check"></i><b>4.3</b> Lesson 3</a><ul>
<li class="chapter" data-level="4.3.1" data-path="lesson-3-1.html"><a href="lesson-3-1.html#using-rpart-and-the-breast-cancer-coimbra-data-set"><i class="fa fa-check"></i><b>4.3.1</b> Using ‘rpart’ and the Breast Cancer Coimbra data set</a></li>
<li class="chapter" data-level="4.3.2" data-path="lesson-3-1.html"><a href="lesson-3-1.html#random-forest"><i class="fa fa-check"></i><b>4.3.2</b> Random Forest</a></li>
<li class="chapter" data-level="4.3.3" data-path="lesson-3-1.html"><a href="lesson-3-1.html#improve-random-forest"><i class="fa fa-check"></i><b>4.3.3</b> Improve Random Forest</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="assignment-trees.html"><a href="assignment-trees.html"><i class="fa fa-check"></i><b>4.4</b> Assignment Trees</a></li>
<li class="chapter" data-level="4.5" data-path="assignment-trees-up-sampling.html"><a href="assignment-trees-up-sampling.html"><i class="fa fa-check"></i><b>4.5</b> Assignment Trees - Up Sampling</a></li>
<li class="chapter" data-level="4.6" data-path="lesson-4-1.html"><a href="lesson-4-1.html"><i class="fa fa-check"></i><b>4.6</b> Lesson 4</a><ul>
<li class="chapter" data-level="4.6.1" data-path="lesson-4-1.html"><a href="lesson-4-1.html#build-network-from-data-using-naive-bayes"><i class="fa fa-check"></i><b>4.6.1</b> Build network from data using naive bayes</a></li>
<li class="chapter" data-level="4.6.2" data-path="lesson-4-1.html"><a href="lesson-4-1.html#learn-the-structure-of-a-bayesian-network-using-a-hill-climbing-hc-or-a-tabu-search-tabu-greedy-search"><i class="fa fa-check"></i><b>4.6.2</b> Learn the structure of a Bayesian network using a hill-climbing (HC) or a Tabu search (TABU) greedy search</a></li>
<li class="chapter" data-level="4.6.3" data-path="lesson-4-1.html"><a href="lesson-4-1.html#fit-existing-network-using-data"><i class="fa fa-check"></i><b>4.6.3</b> Fit existing network using data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="bayes.html"><a href="bayes.html"><i class="fa fa-check"></i><b>5</b> BAYES</a><ul>
<li class="chapter" data-level="5.1" data-path="lesson-4-2.html"><a href="lesson-4-2.html"><i class="fa fa-check"></i><b>5.1</b> Lesson 4</a></li>
<li class="chapter" data-level="5.2" data-path="representing-a-betaab-distribution.html"><a href="representing-a-betaab-distribution.html"><i class="fa fa-check"></i><b>5.2</b> Representing a Beta(a,b) distribution:</a></li>
<li class="chapter" data-level="5.3" data-path="functions-to-work-with-beta-distributions.html"><a href="functions-to-work-with-beta-distributions.html"><i class="fa fa-check"></i><b>5.3</b> Functions to work with Beta distributions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="top.html"><a href="top.html"><i class="fa fa-check"></i><b>6</b> TOP.HIDA</a><ul>
<li class="chapter" data-level="6.1" data-path="seminar1.html"><a href="seminar1.html"><i class="fa fa-check"></i><b>6.1</b> Seminar 1</a><ul>
<li class="chapter" data-level="6.1.1" data-path="seminar1.html"><a href="seminar1.html#bruno-lima"><i class="fa fa-check"></i><b>6.1.1</b> Bruno Lima</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HEADS 2nd semester</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-1" class="section level2">
<h2><span class="header-section-number">2.1</span> Lesson 1</h2>
<p>2020-02-03</p>
<p><strong>Exercises Solutions</strong> (just copied teacher’s solutions)</p>
<ol style="list-style-type: decimal">
<li>Open the database Anesthesia-BD.csv</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">data =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;2.UploadedData/Anesthesia-BD.csv&quot;</span>) <span class="co">###load dat</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">str</span>(data) <span class="co">###see data structure</span></a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    387 obs. of  9 variables:
##  $ Subject         : Factor w/ 387 levels &quot;Sbj001&quot;,&quot;Sbj002&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ Gender          : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 1 2 2 2 2 2 2 1 ...
##  $ Age             : int  50 67 71 51 69 78 70 58 80 63 ...
##  $ TypeSurgery     : Factor w/ 3 levels &quot;CAB&quot;,&quot;CAB + Valve&quot;,..: 3 1 1 3 1 2 1 3 3 2 ...
##  $ SurgStatus      : Factor w/ 2 levels &quot;Elective&quot;,&quot;Urgent&quot;: 1 1 2 1 2 2 1 2 1 2 ...
##  $ Diastolic       : num  45.5 52.6 56.7 71.4 58.1 ...
##  $ Systolic        : num  112.1 109 98.2 150.8 131.5 ...
##  $ Cross_Clamp_Time: int  83 67 83 51 63 114 94 138 42 172 ...
##  $ AdvEvent        : int  0 0 0 0 1 0 0 0 0 0 ...</code></pre>
<p>Factor variable AdvEvent</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">data<span class="op">$</span>AdvEvent &lt;-<span class="st"> </span><span class="kw">factor</span>(data<span class="op">$</span>AdvEvent, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>))</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>For the columns which contain numeric values, create a new summary table in which the rows are the mean, the standard deviation, and the median of each of the numeric columns.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">T &lt;-<span class="st"> </span><span class="kw">sapply</span>(data[,<span class="kw">sapply</span>(data,is.numeric)],<span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="kw">return</span>(<span class="kw">rbind</span>(<span class="kw">mean</span>(x,<span class="dt">na.rm =</span> T),<span class="kw">sd</span>(x,<span class="dt">na.rm =</span> T),<span class="kw">median</span>(x,<span class="dt">na.rm =</span> T)))</a>
<a class="sourceLine" id="cb7-3" title="3">  }</a>
<a class="sourceLine" id="cb7-4" title="4">  )</a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">rownames</span>(T) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Mean&quot;</span>,<span class="st">&quot;SD&quot;</span>,<span class="st">&quot;Median&quot;</span>)</a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8">T</a></code></pre></div>
<pre><code>##             Age Diastolic  Systolic Cross_Clamp_Time
## Mean   67.27390  60.93076 132.04705         72.00521
## SD     11.25574  11.35387  21.22864         32.04680
## Median 67.00000  60.52591 130.00410         67.00000</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Considering only the subjects who had CAB or Valve surgery, how many had adverse events? How many males and females in the two groups (having or not having adverse events)? (count and percentage)</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># create an index with the observation that comply with the conditions</span></a>
<a class="sourceLine" id="cb9-2" title="2">ind =<span class="st"> </span><span class="kw">which</span>(data<span class="op">$</span>TypeSurgery<span class="op">==</span><span class="st">&quot;CAB&quot;</span> <span class="op">|</span><span class="st"> </span>data<span class="op">$</span>TypeSurgery<span class="op">==</span><span class="st">&quot;Valve&quot;</span> )</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co"># table these data counts</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="kw">table</span>(data[ind,<span class="st">&quot;AdvEvent&quot;</span>])</a></code></pre></div>
<pre><code>## 
##  No Yes 
## 231  80</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># and frequencies</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">prop.table</span>(<span class="kw">table</span>(data[ind,<span class="st">&quot;AdvEvent&quot;</span>]))</a></code></pre></div>
<pre><code>## 
##        No       Yes 
## 0.7427653 0.2572347</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># now by gender</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">table</span>(data[ind,<span class="st">&quot;Gender&quot;</span>],data[ind,<span class="st">&quot;AdvEvent&quot;</span>])</a></code></pre></div>
<pre><code>##         
##           No Yes
##   Female  60  21
##   Male   171  59</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># and their frequencies</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">prop.table</span>(<span class="kw">table</span>(data[ind,<span class="st">&quot;Gender&quot;</span>],data[ind,<span class="st">&quot;AdvEvent&quot;</span>]))</a></code></pre></div>
<pre><code>##         
##                  No        Yes
##   Female 0.19292605 0.06752412
##   Male   0.54983923 0.18971061</code></pre>
<p>4.Merge the two datasets (Anesthesia-BD.csv and Anesthesia-BD2.csv)
by the subject identification number.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">data2 =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;2.UploadedData/Anesthesia-BD2.csv&quot;</span>) <span class="co">###load data Anesthesia-BD2.csv</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co"># I had to rename the first column, I don&#39;t know why</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">names</span>(data2)[<span class="dv">1</span>]&lt;-<span class="st">&quot;SubjectID&quot;</span></a>
<a class="sourceLine" id="cb17-5" title="5"></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="kw">str</span>(data2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    363 obs. of  7 variables:
##  $ SubjectID         : Factor w/ 363 levels &quot;Sbj001&quot;,&quot;Sbj002&quot;,..: 3 25 30 32 36 39 46 56 60 63 ...
##  $ Diabetes          : int  0 0 1 1 0 0 0 1 0 0 ...
##  $ RFLastA1cLevel    : num  5.7 5.6 7.1 6.7 6.7 6.3 6 6.5 5.3 4.9 ...
##  $ ChronicLungDisease: Factor w/ 4 levels &quot;Mild&quot;,&quot;Moderate&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Hypertension      : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ CHF               : int  0 1 1 1 1 1 1 0 1 1 ...
##  $ Euroscore         : Factor w/ 330 levels &quot;#N/A&quot;,&quot;0.501743134&quot;,..: 8 64 4 92 249 36 195 125 214 224 ...</code></pre>
<ol style="list-style-type: upper-alpha">
<li>The merge must be such that only the common subjects should be present in the final database (natural join).</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">Ma =<span class="st"> </span><span class="kw">merge</span>(data,data2,<span class="dt">by.x =</span> <span class="st">&quot;Subject&quot;</span>,<span class="dt">by.y=</span><span class="st">&quot;SubjectID&quot;</span>,<span class="dt">all =</span> F)</a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">dim</span>(Ma)</a></code></pre></div>
<pre><code>## [1] 363  15</code></pre>
<ol start="2" style="list-style-type: upper-alpha">
<li>The merge must be such that if some subject is not in one of the databases, the subject should be in the database, and missing information must be not available (full outer join).</li>
</ol>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">Mb =<span class="st"> </span><span class="kw">merge</span>(data,data2,<span class="dt">by.x =</span> <span class="st">&quot;Subject&quot;</span>,<span class="dt">by.y=</span><span class="st">&quot;SubjectID&quot;</span>,<span class="dt">all =</span> T)</a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="kw">dim</span>(Mb)</a></code></pre></div>
<pre><code>## [1] 387  15</code></pre>
<p>Consider the following statement: “For people without diabetes, the normal range for the hemoglobin A1c level is between 4% and 5.6%. Hemoglobin A1c levels between 5.7% and 6.4% mean you have a higher chance of getting diabetes. Levels of 6.5% or higher mean you have diabetes.”</p>
<ol start="5" style="list-style-type: decimal">
<li>Create a new variable with three factors (normal, prediabetes, and diabetes), taking into consideration the values the A1c levels. Compare the results obtained with the variable Diabetes (assuming that 1 means to have diabetes and 0 no diabetes).</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">diab &lt;-<span class="st"> </span><span class="kw">ifelse</span>(Mb<span class="op">$</span>RFLastA1cLevel<span class="op">&lt;</span><span class="fl">5.7</span>,<span class="dv">0</span>,<span class="kw">ifelse</span>(Mb<span class="op">$</span>RFLastA1cLevel<span class="op">&lt;</span><span class="fl">6.4</span>,<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb23-2" title="2"></a>
<a class="sourceLine" id="cb23-3" title="3">Mb<span class="op">$</span>Diabetes2 &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="dt">x =</span> diab,</a>
<a class="sourceLine" id="cb23-4" title="4">                       <span class="dt">levels =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb23-5" title="5">                       <span class="dt">labels =</span><span class="kw">c</span>(<span class="st">&quot;Normal&quot;</span>,<span class="st">&quot;PreDiabetes&quot;</span>,<span class="st">&quot;Diabetes&quot;</span>))</a>
<a class="sourceLine" id="cb23-6" title="6"></a>
<a class="sourceLine" id="cb23-7" title="7">Mb<span class="op">$</span>Diabetes &lt;-<span class="st"> </span><span class="kw">factor</span>(Mb<span class="op">$</span>Diabetes,</a>
<a class="sourceLine" id="cb23-8" title="8">                      <span class="dt">levels=</span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb23-9" title="9">                      <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Normal&quot;</span>,<span class="st">&quot;Diabetes&quot;</span>))</a>
<a class="sourceLine" id="cb23-10" title="10"></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="kw">table</span>(Mb<span class="op">$</span>Diabetes,Mb<span class="op">$</span>Diabetes2)</a></code></pre></div>
<pre><code>##           
##            Normal PreDiabetes Diabetes
##   Normal      120          99       11
##   Diabetes      7          35       83</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Create a table with the comparison between the groups having or not having
adverse events for all the variables available in the combined database. Use the
appropriate measures for each type of variable.</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">str</span>(Mb)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    387 obs. of  16 variables:
##  $ Subject           : Factor w/ 387 levels &quot;Sbj001&quot;,&quot;Sbj002&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ Gender            : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 1 2 2 2 2 2 2 1 ...
##  $ Age               : int  50 67 71 51 69 78 70 58 80 63 ...
##  $ TypeSurgery       : Factor w/ 3 levels &quot;CAB&quot;,&quot;CAB + Valve&quot;,..: 3 1 1 3 1 2 1 3 3 2 ...
##  $ SurgStatus        : Factor w/ 2 levels &quot;Elective&quot;,&quot;Urgent&quot;: 1 1 2 1 2 2 1 2 1 2 ...
##  $ Diastolic         : num  45.5 52.6 56.7 71.4 58.1 ...
##  $ Systolic          : num  112.1 109 98.2 150.8 131.5 ...
##  $ Cross_Clamp_Time  : int  83 67 83 51 63 114 94 138 42 172 ...
##  $ AdvEvent          : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 2 1 1 1 1 1 ...
##  $ Diabetes          : Factor w/ 2 levels &quot;Normal&quot;,&quot;Diabetes&quot;: 2 1 1 1 1 1 1 1 1 2 ...
##  $ RFLastA1cLevel    : num  7.9 5.5 5.7 6 5.8 NA 5.9 6 5.2 11.2 ...
##  $ ChronicLungDisease: Factor w/ 4 levels &quot;Mild&quot;,&quot;Moderate&quot;,..: 3 3 1 3 3 3 3 3 3 3 ...
##  $ Hypertension      : int  1 1 1 0 1 0 1 1 1 0 ...
##  $ CHF               : int  1 0 0 0 0 1 1 1 1 1 ...
##  $ Euroscore         : Factor w/ 330 levels &quot;#N/A&quot;,&quot;0.501743134&quot;,..: 47 206 8 289 159 96 119 98 77 4 ...
##  $ Diabetes2         : Factor w/ 3 levels &quot;Normal&quot;,&quot;PreDiabetes&quot;,..: 3 1 2 2 2 NA 2 2 1 3 ...</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1">Mb<span class="op">$</span>Hypertension &lt;-<span class="st"> </span><span class="kw">factor</span>(Mb<span class="op">$</span>Hypertension,</a>
<a class="sourceLine" id="cb27-2" title="2">                          <span class="dt">levels=</span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb27-3" title="3">                          <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>))</a>
<a class="sourceLine" id="cb27-4" title="4"></a>
<a class="sourceLine" id="cb27-5" title="5">Mb<span class="op">$</span>CHF &lt;-<span class="st"> </span><span class="kw">factor</span>(Mb<span class="op">$</span>CHF,</a>
<a class="sourceLine" id="cb27-6" title="6">                 <span class="dt">levels=</span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb27-7" title="7">                 <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>))</a>
<a class="sourceLine" id="cb27-8" title="8"></a>
<a class="sourceLine" id="cb27-9" title="9">Mb<span class="op">$</span>Subject &lt;-<span class="st"> </span><span class="kw">as.character</span>(Mb<span class="op">$</span>Subject)</a>
<a class="sourceLine" id="cb27-10" title="10"></a>
<a class="sourceLine" id="cb27-11" title="11"><span class="co">#windows()</span></a>
<a class="sourceLine" id="cb27-12" title="12"></a>
<a class="sourceLine" id="cb27-13" title="13"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb27-14" title="14"></a>
<a class="sourceLine" id="cb27-15" title="15"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">which</span>(<span class="kw">sapply</span>(Mb,is.numeric))){</a>
<a class="sourceLine" id="cb27-16" title="16"><span class="kw">hist</span>(Mb[,i],<span class="dt">xlab=</span><span class="kw">colnames</span>(Mb)[i])</a>
<a class="sourceLine" id="cb27-17" title="17">}</a>
<a class="sourceLine" id="cb27-18" title="18"></a>
<a class="sourceLine" id="cb27-19" title="19"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="heads2sem_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">table &lt;-<span class="st"> </span><span class="kw">by</span>(Mb[,<span class="kw">which</span>(<span class="kw">sapply</span>(Mb,is.numeric))],</a>
<a class="sourceLine" id="cb28-2" title="2">            <span class="dt">INDICES =</span> Mb<span class="op">$</span>AdvEvent,</a>
<a class="sourceLine" id="cb28-3" title="3">            <span class="dt">FUN =</span> <span class="cf">function</span>(x) <span class="kw">apply</span>(x,<span class="dv">2</span>,quantile,<span class="dt">na.rm=</span>T))</a>
<a class="sourceLine" id="cb28-4" title="4"></a>
<a class="sourceLine" id="cb28-5" title="5">table</a></code></pre></div>
<pre><code>## Mb$AdvEvent: No
##      Age Diastolic  Systolic Cross_Clamp_Time RFLastA1cLevel
## 0%    25  26.42047  88.70903               15            4.7
## 25%   59  53.30694 115.03977               51            5.6
## 50%   67  60.75382 129.50300               68            5.8
## 75%   76  68.64874 143.12238               83            6.4
## 100%  92  94.35495 180.95547              241           12.2
## -------------------------------------------------------- 
## Mb$AdvEvent: Yes
##      Age Diastolic  Systolic Cross_Clamp_Time RFLastA1cLevel
## 0%    24  39.42266  92.34727             13.0          4.600
## 25%   62  52.93295 119.55877             48.0          5.500
## 50%   69  59.94571 131.48461             64.0          5.800
## 75%   77  65.97349 153.50990             88.5          6.425
## 100%  88  92.51766 193.75080            298.0         11.700</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">table<span class="op">$</span>pvalue &lt;-<span class="st"> </span><span class="kw">apply</span>(Mb[,<span class="kw">which</span>(<span class="kw">sapply</span>(Mb,is.numeric))],<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb30-2" title="2">                      <span class="cf">function</span>(x)</a>
<a class="sourceLine" id="cb30-3" title="3">                        <span class="kw">wilcox.test</span>(x[<span class="kw">which</span>(Mb<span class="op">$</span>AdvEvent<span class="op">==</span><span class="st">&quot;No&quot;</span>)],x[<span class="kw">which</span>(Mb<span class="op">$</span>AdvEvent<span class="op">==</span><span class="st">&quot;Yes&quot;</span>)])<span class="op">$</span>p.value)</a>
<a class="sourceLine" id="cb30-4" title="4"></a>
<a class="sourceLine" id="cb30-5" title="5">table</a></code></pre></div>
<pre><code>##      Age Diastolic  Systolic Cross_Clamp_Time RFLastA1cLevel
## 0%    25  26.42047  88.70903               15            4.7
## 25%   59  53.30694 115.03977               51            5.6
## 50%   67  60.75382 129.50300               68            5.8
## 75%   76  68.64874 143.12238               83            6.4
## 100%  92  94.35495 180.95547              241           12.2
## -------------------------------------------------------- 
##      Age Diastolic  Systolic Cross_Clamp_Time RFLastA1cLevel
## 0%    24  39.42266  92.34727             13.0          4.600
## 25%   62  52.93295 119.55877             48.0          5.500
## 50%   69  59.94571 131.48461             64.0          5.800
## 75%   77  65.97349 153.50990             88.5          6.425
## 100%  88  92.51766 193.75080            298.0         11.700
## -------------------------------------------------------- 
##              Age        Diastolic         Systolic Cross_Clamp_Time 
##       0.09297764       0.41375034       0.09079886       0.76575185 
##   RFLastA1cLevel 
##       0.78804579</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">Mb<span class="op">$</span>Euroscore&lt;-<span class="kw">as.character</span>(Mb<span class="op">$</span>Euroscore)</a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3">table2 &lt;-<span class="st"> </span><span class="kw">by</span>(Mb[,<span class="kw">which</span>(<span class="kw">sapply</span>(Mb,is.factor))], </a>
<a class="sourceLine" id="cb32-4" title="4">             <span class="dt">INDICES =</span> Mb<span class="op">$</span>AdvEvent, </a>
<a class="sourceLine" id="cb32-5" title="5">             <span class="dt">FUN =</span> <span class="cf">function</span>(x){<span class="kw">sapply</span>(x,table)})</a>
<a class="sourceLine" id="cb32-6" title="6"></a>
<a class="sourceLine" id="cb32-7" title="7">table2</a></code></pre></div>
<pre><code>## Mb$AdvEvent: No
## $Gender
## 
## Female   Male 
##     78    200 
## 
## $TypeSurgery
## 
##         CAB CAB + Valve       Valve 
##         156          47          75 
## 
## $SurgStatus
## 
## Elective   Urgent 
##      148      130 
## 
## $AdvEvent
## 
##  No Yes 
## 278   0 
## 
## $Diabetes
## 
##   Normal Diabetes 
##      170       93 
## 
## $ChronicLungDisease
## 
##     Mild Moderate       No   Severe 
##       34        4      226        1 
## 
## $Hypertension
## 
##  No Yes 
##  49 215 
## 
## $CHF
## 
##  No Yes 
## 186  79 
## 
## $Diabetes2
## 
##      Normal PreDiabetes    Diabetes 
##          91         100          70 
## 
## -------------------------------------------------------- 
## Mb$AdvEvent: Yes
## $Gender
## 
## Female   Male 
##     31     78 
## 
## $TypeSurgery
## 
##         CAB CAB + Valve       Valve 
##          41          29          39 
## 
## $SurgStatus
## 
## Elective   Urgent 
##       64       45 
## 
## $AdvEvent
## 
##  No Yes 
##   0 109 
## 
## $Diabetes
## 
##   Normal Diabetes 
##       65       33 
## 
## $ChronicLungDisease
## 
##     Mild Moderate       No   Severe 
##       16        0       79        3 
## 
## $Hypertension
## 
##  No Yes 
##  20  78 
## 
## $CHF
## 
##  No Yes 
##  50  47 
## 
## $Diabetes2
## 
##      Normal PreDiabetes    Diabetes 
##          36          35          25</code></pre>
<p><img src="images/LogoFMUP.png" alt="logotipo FMUP" style="width:100px;height:40px;" align="right"></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="compstat.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["heads2sem.pdf", "heads2sem.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
