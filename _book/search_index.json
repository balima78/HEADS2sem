[
["assignment-feature-selection.html", "3.12 Assignment feature selection", " 3.12 Assignment feature selection 2020-05-11 3.12.1 Boruta Package in R 113 patients at the Los Angeles County Hospital Shock Unit (afifi.sav) Build a model to predict the Hemoglobin at time 2 (HGB2) using the patients characteristics (AGE and SEX) and measurements taken at admission (SBP1, MAP1, HEART1, DBP1, CVP1, BSA1, CARDIAC1, APPTIME1, CIRCTIME1, URINE1, PLASVOL, REDCELL1, HGB1, HCT1) Read data library(haven) data2 &lt;- read_sav(&quot;2.UploadedData/afifi.sav&quot;) data2&lt;-as.data.frame(data2) str(data2) ## &#39;data.frame&#39;: 113 obs. of 17 variables: ## $ IDNUM : num 340 412 426 444 515 517 518 522 526 527 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 7 ## $ AGE : num 70 56 47 75 61 68 71 30 78 40 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 6 ## $ SEX : &#39;haven_labelled&#39; num 0 1 1 0 1 1 0 0 1 1 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F3.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 5 ## ..- attr(*, &quot;labels&quot;)= Named num 0 1 ## .. ..- attr(*, &quot;names&quot;)= chr &quot;female&quot; &quot;male&quot; ## $ SBP1 : num 62 83 80 62 128 114 102 97 90 112 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 6 ## $ MAP1 : num 38 66 64 51 91 88 74 71 60 61 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 6 ## $ HEART1 : num 53 110 84 97 107 95 112 93 113 136 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## $ DBP1 : num 29 60 55 43 71 73 65 55 46 48 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## ..- attr(*, &quot;display_width&quot;)= int 6 ## $ CVP1 : num 10 1 1 13 11.5 1.7 1.9 15.1 8.6 25.7 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 7 ## $ BSA1 : num 1.87 1.82 1.8 1.3 NA 1.41 1.69 1.58 1.63 NA ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.2&quot; ## ..- attr(*, &quot;display_width&quot;)= int 7 ## $ CARDIAC1 : num 0.9 1.26 1.1 0.6 2.3 0.66 1.33 2.86 3.3 1.2 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.2&quot; ## ..- attr(*, &quot;display_width&quot;)= int 10 ## $ APPTIME1 : num 19 22.1 12 15 7.4 11.5 15.3 6 10 10.7 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 10 ## $ CIRCTIME1: num 39 40.7 28 59 19.3 22.5 31.3 14.4 19.4 34.5 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 11 ## $ URINE1 : num 0 110 80 5 140 110 80 10 21 1 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F4.0&quot; ## $ PLASVOL1 : num 39.4 36.2 37.3 33.5 74.7 56.2 32.1 55.7 65.3 70.9 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 10 ## $ REDCELL1 : num 24.1 24 27.2 20.8 18.6 20.6 14.1 15.1 16.8 16.2 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 10 ## $ HCT1 : num 40 50 49 43 24 34 40.3 30 27 42 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 7 ## $ HGB2 : num 11.2 15.4 9.9 10.9 9.8 10 9.4 10 10 9.1 ... ## ..- attr(*, &quot;format.spss&quot;)= chr &quot;F5.1&quot; ## ..- attr(*, &quot;display_width&quot;)= int 7 Implement Boruta results from boruta library(printr) print(boruta) ## Boruta performed 99 iterations in 13.35349 secs. ## 6 attributes confirmed important: AGE, BSA1, CARDIAC1, CIRCTIME1, ## HCT1 and 1 more; ## 7 attributes confirmed unimportant: CVP1, HEART1, IDNUM, ## PLASVOL1, SBP1 and 2 more; ## 3 tentative attributes left: APPTIME1, DBP1, MAP1; selected features plot(boruta, xlab = &quot;&quot;, xaxt = &quot;n&quot;) lz&lt;-lapply(1:ncol(boruta$ImpHistory),function(i) boruta$ImpHistory[is.finite(boruta$ImpHistory[,i]),i]) names(lz) &lt;- colnames(boruta$ImpHistory) Labels &lt;- sort(sapply(lz,median)) axis(side = 1,las=2,labels = names(Labels), at = 1:ncol(boruta$ImpHistory), cex.axis = 0.7) print(getSelectedAttributes(boruta)) ## [1] &quot;AGE&quot; &quot;BSA1&quot; &quot;CARDIAC1&quot; &quot;CIRCTIME1&quot; &quot;REDCELL1&quot; &quot;HCT1&quot; Extract attribute statistics attStats(boruta) meanImp medianImp minImp maxImp normHits decision IDNUM 0.1517117 0.0803603 -1.4920616 1.900130 0.0000000 Rejected AGE 4.1422943 4.0776834 1.0791020 7.379167 0.7575758 Confirmed SEX -0.2607136 -0.8409850 -1.4101121 1.570998 0.0000000 Rejected SBP1 1.8196701 1.9473977 -0.3593812 3.840676 0.1717172 Rejected MAP1 3.4778558 3.3648401 1.4097679 5.636677 0.6060606 Tentative HEART1 0.2100310 -0.0000978 -1.0207458 3.300966 0.0000000 Rejected DBP1 2.4726025 2.5130919 0.2023409 6.169704 0.4545455 Tentative CVP1 -0.9402480 -1.2262371 -2.5951477 1.887657 0.0000000 Rejected BSA1 3.4328202 3.4341716 0.7461243 6.264958 0.6464646 Confirmed CARDIAC1 4.5280848 4.5563930 2.0821596 7.871692 0.8080808 Confirmed APPTIME1 2.6927184 2.5183289 -0.0123265 6.309094 0.4242424 Tentative CIRCTIME1 7.7656487 7.7370969 5.3463866 9.907827 0.9797980 Confirmed URINE1 -0.2501776 -0.2991546 -1.3503917 1.069198 0.0000000 Rejected PLASVOL1 0.9275072 0.9716013 -0.8665025 2.693182 0.0202020 Rejected REDCELL1 4.0883848 3.9670301 1.6512573 6.462257 0.7676768 Confirmed HCT1 8.7798827 8.6758768 6.8505330 11.551838 0.9898990 Confirmed with the selected features, fit a linear model #form&lt;-getConfirmedFormula(boruta) form&lt;-getNonRejectedFormula(boruta) model&lt;-lm(form, data = data2) library(broom) tidy(model) term estimate std.error statistic p.value (Intercept) 1.0223582 1.8418376 0.5550751 0.5801480 AGE 0.0117378 0.0118097 0.9939077 0.3227926 MAP1 -0.0065953 0.0342614 -0.1925005 0.8477611 DBP1 0.0261556 0.0429193 0.6094124 0.5437059 BSA1 2.2066938 0.8543697 2.5828324 0.0113252 CARDIAC1 0.0361544 0.1477869 0.2446385 0.8072640 APPTIME1 0.0142515 0.0624277 0.2282883 0.8199128 CIRCTIME1 0.0391994 0.0334208 1.1729034 0.2437671 REDCELL1 0.0370067 0.0185559 1.9943391 0.0489812 HCT1 0.0604300 0.0275308 2.1950001 0.0306000 glance(model) r.squared adj.r.squared sigma statistic p.value df logLik AIC BIC deviance df.residual 0.3512673 0.2898084 1.649498 5.715485 2.6e-06 10 -196.2836 414.5672 443.7608 258.4801 95 print(form) ## HGB2 ~ AGE + MAP1 + DBP1 + BSA1 + CARDIAC1 + APPTIME1 + CIRCTIME1 + ## REDCELL1 + HCT1 ## &lt;environment: 0x000000001a0d3df8&gt; plot model assumptions par(mfrow=c(2,2)) plot(model) references https://www.analyticsvidhya.com/blog/2016/03/select-important-variables-boruta-package/ https://www.andreaperlato.com/mlpost/feature-selection-using-boruta-algorithm/ https://earlglynn.github.io/RNotes/package/Boruta/index.html "]
]
